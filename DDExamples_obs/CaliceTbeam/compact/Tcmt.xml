<lccdd xmlns:compact="http://www.lcsim.org/schemas/compact/1.0" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    xs:noNamespaceSchemaLocation="http://www.lcsim.org/schemas/compact/1.0/compact.xsd">

    <info name="CALICE_TB_Calo"
        title="CALICE testbeam calo detectors model"
        author="S. Lu"
        url="http://ilcsoft.desy.de"
        status="development"
        version="$Id: CALICETb.xml Lu $">
        <comment>The compact format for the CALICE testbeam Detector - toy model </comment>        
    </info>
  
    <includes>
        <gdmlFile  ref="elements.xml"/>
        <gdmlFile  ref="materials.xml"/>
        <pyBuilder ref="../drivers"/>
    </includes>
  
    <define>
        <constant name="world_side"             value="10*m"/>
        <constant name="world_x"                value="world_side/2"/>
        <constant name="world_y"                value="world_side/2"/>
        <constant name="world_z"                value="world_side/2"/>        

        <constant name="TBTcmt_position"        value="4500.0*mm"/>
    </define>

    <limits>
        <limitset name="cal_limits">
            <limit name="step_length_max" particles="*" value="30.0" unit="mm" />
        </limitset>
    </limits>

    <display>
      <vis name="TcmtVis"          alpha="1" r="1"    g="1"    b="0.1" showDaughters="true" visible="false"/>
      <vis name="TcmtRadiatorVis"  alpha="1" r="0.69" g="0.77" b="0.87"showDaughters="true" visible="true"/>
      <vis name="TcmtLayerVis"     alpha="1" r="1"    g="0"    b="0.5" showDaughters="true" visible="true"/>
      <vis name="TcmtSensorVis"    alpha="1" r="0"    g="1"    b="1"   showDaughters="true" visible="true"/>
      <vis name="TcmtFR4Vis"       alpha="1" r="0.44" g="0.77" b="0.44"showDaughters="true" visible="true"/>
      <vis name="TcmtCuVis"        alpha="1" r="0.8"  g="0.4"  b="0"   showDaughters="true" visible="true"/>
      <vis name="TcmtAirVis"       alpha="1" r="1"    g="1"    b="1"   showDaughters="true" visible="true"/>
    </display>

    <detectors>
        <detector id="8" name="Tcmt" type="CalotbeamBox" readout="TcmtHits" vis="TcmtVis" calorimeterType="TCMT">
            <comment>Analog Hadron Calorimeter Prototype</comment>

            <!-- detector online alignment -->
            <dimensions x="1080" y="1080" z="(26.5+46.5+66.5+10.0)*10.0+20.0"/>
	    <position x="0" y="0" z="TBTcmt_position"/>
            <rotation x="0" y="0" z="0"/>
	    <layers>
            <layer repeat="10">
                <slice material = "Steel235"    thickness = "20.0*mm"  vis="TcmtRadiatorVis" />
                <slice material = "Polystyrene" thickness =  "3.0*mm" sensitive = "yes" limits="cal_limits" vis="TcmtSensorVis"/>
                <slice material = "FR4"         thickness =  "0.7*mm" vis="TcmtFR4Vis" />
                <slice material = "Cu"          thickness =  "0.1*mm" vis="TcmtCuVis" />
                <slice material = "Air"         thickness =  "12.7*mm" /> <!--vis="TcmtAirVis" /-->
            </layer>
            <layer repeat="10">
                <slice material = "Steel235"    thickness = "30.0*mm"  vis="TcmtRadiatorVis" />
                <slice material = "Polystyrene" thickness =  "3.0*mm" sensitive = "yes" limits="cal_limits" vis="TcmtSensorVis"/>
                <slice material = "FR4"         thickness =  "0.7*mm" vis="TcmtFR4Vis" />
                <slice material = "Cu"          thickness =  "0.1*mm" vis="TcmtCuVis" />
                <slice material = "Air"         thickness =  "12.7*mm" /> <!--vis="TcmtAirVis" /-->
            </layer>
            <layer repeat="10">
                <slice material = "Steel235"    thickness = "50.0*mm"  vis="TcmtRadiatorVis" />
                <slice material = "Polystyrene" thickness =  "3.0*mm" sensitive = "yes" limits="cal_limits" vis="TcmtSensorVis"/>
                <slice material = "FR4"         thickness =  "0.7*mm" vis="TcmtFR4Vis" />
                <slice material = "Cu"          thickness =  "0.1*mm" vis="TcmtCuVis" />
                <slice material = "Air"         thickness =  "12.7*mm" /> <!--vis="TcmtAirVis" /-->
            </layer>
            <layer repeat="(int) 1">
                <slice material = "Steel235"    thickness = "20.0*mm"  vis="TcmtRadiatorVis" />
            </layer>
	    </layers>
        </detector>
    </detectors>

    <readouts>
        <readout name="TcmtHits">
            <segmentation type="GlobalGridXY" gridSizeX="30.0*mm" gridSizeY="30.0*mm" />
            <id>system:6,module:7,layer:8,slice:5,x:32:-16,y:-16</id>
        </readout>
    </readouts>

</lccdd>
