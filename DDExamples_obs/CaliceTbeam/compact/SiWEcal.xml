<lccdd xmlns:compact="http://www.lcsim.org/schemas/compact/1.0" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    xs:noNamespaceSchemaLocation="http://www.lcsim.org/schemas/compact/1.0/compact.xsd">

    <info name="CALICE_TB_Calo"
        title="CALICE testbeam calo detectors model"
        author="S. Lu"
        url="http://ilcsoft.desy.de"
        status="development"
        version="$Id: CALICETb.xml Lu $">
        <comment>The compact format for the CALICE testbeam Detector - toy model </comment>        
    </info>
  
    <includes>
        <gdmlFile  ref="elements.xml"/>
        <gdmlFile  ref="materials.xml"/>
        <pyBuilder ref="../drivers"/>
    </includes>
  
    <define>
        <constant name="world_side"             value="10*m"/>
        <constant name="world_x"                value="world_side/2"/>
        <constant name="world_y"                value="world_side/2"/>
        <constant name="world_z"                value="world_side/2"/>        

        <constant name="TBSiWcal_position"      value="2000.0*mm"/>
    </define>

    <limits>
        <limitset name="cal_limits">
            <limit name="step_length_max" particles="*" value="5.0" unit="mm" />
        </limitset>
    </limits>

    <display>
      <vis name="SiWEcalVis"          alpha="1" r="1"    g="1"    b="0.1" showDaughters="true" visible="false"/>
      <vis name="SiWEcalRadiatorVis"  alpha="1" r="0.47" g="0.53" b="0.6" showDaughters="true" visible="true"/>
      <vis name="SiWEcalLayerVis"     alpha="1" r="1"    g="0"    b="0.5" showDaughters="true" visible="true"/>
      <vis name="SiWEcalSensorVis"    alpha="1" r="0.96" g="0.64" b="0.38"showDaughters="true" visible="true"/>
      <vis name="SiWEcalFR4Vis"       alpha="1" r="0.44" g="0.77" b="0.44"showDaughters="true" visible="true"/>
      <vis name="SiWEcalCuVis"        alpha="1" r="0.8"  g="0.4"  b="0"   showDaughters="true" visible="true"/>
      <vis name="SiWEcalAirVis"       alpha="1" r="1"    g="1"    b="1"   showDaughters="true" visible="true"/>
    </display>

    <detectors>
        <detector id="6" name="SiWEcal" type="CalotbeamBox" readout="SiWEcalHits" vis="SiWEcalVis" calorimeterType="ECAL">
            <comment>The Silicon Tungsten ECAL Calorimeter Prototype</comment>

            <!-- detector online alignment -->
           <dimensions x="180.0*mm" y="180.0*mm" z="(5.0+6.4+7.8)*5.0*mm"/>
	    <position x="0" y="0" z="TBSiWcal_position"/>
            <rotation x="0" y="0" z="0"/>
	    <layers>
	    <layer repeat="5">
                <slice material = "Tungsten"    thickness =  "1.4*mm" vis="SiWEcalRadiatorVis" />
                <slice material = "Silicon"     thickness =  "0.1*mm" sensitive = "yes" limits="cal_limits" vis="SiWEcalSensorVis"/>
                <slice material = "FR4"         thickness =  "0.7*mm" vis="SiWEcalFR4Vis" />
                <slice material = "Cu"          thickness =  "0.1*mm" vis="SiWEcalCuVis" />
                <slice material = "Air"         thickness =  "2.7*mm" /> <!--vis="SiWEcalAirVis" /-->
            </layer>
	    <layer repeat="5">
                <slice material = "Tungsten"    thickness =  "2.8*mm" vis="SiWEcalRadiatorVis" />
                <slice material = "Silicon"     thickness =  "0.1*mm" sensitive = "yes" limits="cal_limits" vis="SiWEcalSensorVis"/>
                <slice material = "FR4"         thickness =  "0.7*mm" vis="SiWEcalFR4Vis" />
                <slice material = "Cu"          thickness =  "0.1*mm" vis="SiWEcalCuVis" />
                <slice material = "Air"         thickness =  "2.7*mm" /> <!--vis="SiWEcalAirVis" /-->
            </layer>
	    <layer repeat="5">
                <slice material = "Tungsten"    thickness =  "4.2*mm" vis="SiWEcalRadiatorVis" />
                <slice material = "Silicon"     thickness =  "0.1*mm" sensitive = "yes" limits="cal_limits" vis="SiWEcalSensorVis"/>
                <slice material = "FR4"         thickness =  "0.7*mm" vis="SiWEcalFR4Vis" />
                <slice material = "Cu"          thickness =  "0.1*mm" vis="SiWEcalCuVis" />
                <slice material = "Air"         thickness =  "2.7*mm" /> <!--vis="SiWEcalAirVis" /-->
            </layer>
	    </layers>
        </detector>
    </detectors>

    <readouts>
        <readout name="SiWEcalHits">
            <segmentation type="GlobalGridXY" gridSizeX="5.0*mm" gridSizeY="5.0*mm" />
            <id>system:6,module:7,layer:8,slice:5,x:32:-16,y:-16</id>
        </readout>
    </readouts>

</lccdd>
